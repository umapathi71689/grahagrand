"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[700],{670:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(722);const a={NODE_ENV:"production",PUBLIC_URL:"/GrahaGrand",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8000/api",o=s.A.create({baseURL:a,headers:{"Content-Type":"application/json"},timeout:1e4});o.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),o.interceptors.response.use((e=>e),(e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));const p={auth:{login:e=>o.post("/auth/login/",e),register:e=>o.post("/auth/register/",e),refreshToken:e=>o.post("/auth/refresh/",{refresh:e}),logout:()=>o.post("/auth/logout/"),getMe:()=>o.get("/auth/me/")},properties:{getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.get("/properties/",{params:e})},getById:e=>o.get("/properties/".concat(e,"/")),create:e=>o.post("/properties/",e),update:(e,t)=>o.patch("/properties/".concat(e,"/"),t),delete:e=>o.delete("/properties/".concat(e,"/")),uploadImages:(e,t)=>{const r=new FormData;return Array.from(t).forEach((e=>{r.append("images",e)})),o.post("/properties/".concat(e,"/images/"),r,{headers:{"Content-Type":"multipart/form-data"}})},deleteImage:(e,t)=>o.delete("/properties/".concat(e,"/images/").concat(t,"/"))},upcomingProperties:{getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.get("/upcoming-properties/",{params:e})},getById:e=>o.get("/upcoming-properties/".concat(e,"/")),create:e=>o.post("/upcoming-properties/",e),update:(e,t)=>o.patch("/upcoming-properties/".concat(e,"/"),t),delete:e=>o.delete("/upcoming-properties/".concat(e,"/")),uploadImages:(e,t)=>{const r=new FormData;return Array.from(t).forEach((e=>{r.append("images",e)})),o.post("/upcoming-properties/".concat(e,"/images/"),r,{headers:{"Content-Type":"multipart/form-data"}})},deleteImage:(e,t)=>o.delete("/upcoming-properties/".concat(e,"/images/").concat(t,"/"))},futureDevelopments:{getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.get("/future-developments/",{params:e})},getById:e=>o.get("/future-developments/".concat(e,"/")),create:e=>o.post("/future-developments/",e),update:(e,t)=>o.patch("/future-developments/".concat(e,"/"),t),delete:e=>o.delete("/future-developments/".concat(e,"/")),uploadImages:(e,t)=>{const r=new FormData;return Array.from(t).forEach((e=>{r.append("images",e)})),o.post("/future-developments/".concat(e,"/images/"),r,{headers:{"Content-Type":"multipart/form-data"}})},deleteImage:(e,t)=>o.delete("/future-developments/".concat(e,"/images/").concat(t,"/"))},users:{getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.get("/users/",{params:e})},getById:e=>o.get("/users/".concat(e,"/")),update:(e,t)=>o.patch("/users/".concat(e,"/"),t),delete:e=>o.delete("/users/".concat(e,"/"))}};p.getProperties=p.properties.getAll,p.getProperty=p.properties.getById,p.createProperty=p.properties.create,p.updateProperty=p.properties.update,p.deleteProperty=p.properties.delete,p.uploadPropertyImages=p.properties.uploadImages,p.deletePropertyImage=p.properties.deleteImage;const n=p},700:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var s=r(43),a=r(366),o=r(670),p=r(579);const n=()=>{const[e,t]=(0,s.useState)([]),[r,n]=(0,s.useState)(!0),[l,c]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{const e=await o.A.properties.getAll(),r=Array.isArray(e.data)?e.data:e.data.results||[];t(r)}catch(e){c(e.message||"Failed to fetch properties")}finally{n(!1)}})()}),[]);return r?(0,p.jsx)("div",{className:"p-4",children:"Loading properties..."}):l?(0,p.jsxs)("div",{className:"p-4 text-red-500",children:["Error: ",l]}):e.length?(0,p.jsxs)("div",{className:"container mx-auto p-4",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,p.jsx)("h2",{className:"text-2xl font-bold",children:"Properties"}),(0,p.jsx)(a.N_,{to:"/admin/properties/add",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Add New Property"})]}),(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)("table",{className:"min-w-full bg-white shadow rounded-lg",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{className:"bg-gray-800 text-white",children:[(0,p.jsx)("th",{className:"py-3 px-4 text-left",children:"Title"}),(0,p.jsx)("th",{className:"py-3 px-4 text-left",children:"Price"}),(0,p.jsx)("th",{className:"py-3 px-4 text-left",children:"Bedrooms"}),(0,p.jsx)("th",{className:"py-3 px-4 text-left",children:"Status"}),(0,p.jsx)("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),(0,p.jsx)("tbody",{children:e.map((r=>{var s;return(0,p.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,p.jsx)("td",{className:"py-3 px-4",children:r.title}),(0,p.jsxs)("td",{className:"py-3 px-4",children:["$",null===(s=r.price)||void 0===s?void 0:s.toLocaleString()]}),(0,p.jsx)("td",{className:"py-3 px-4",children:r.bedrooms}),(0,p.jsx)("td",{className:"py-3 px-4",children:(0,p.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("available"===r.status?"bg-green-100 text-green-800":"sold"===r.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:r.status})}),(0,p.jsxs)("td",{className:"py-3 px-4 space-x-2",children:[(0,p.jsx)(a.N_,{to:"/admin/properties/edit/".concat(r.id),className:"text-blue-500 hover:text-blue-700 hover:underline",children:"Edit"}),(0,p.jsx)("button",{onClick:()=>(async r=>{if(window.confirm("Are you sure you want to delete this property?"))try{await o.A.properties.delete(r),t(e.filter((e=>e.id!==r)))}catch(s){c(s.message||"Failed to delete property")}})(r.id),className:"text-red-500 hover:text-red-700 hover:underline",children:"Delete"})]})]},r.id)}))})]})})]}):(0,p.jsx)("div",{className:"p-4",children:"No properties found"})}}}]);
//# sourceMappingURL=700.bfcc6e2d.chunk.js.map