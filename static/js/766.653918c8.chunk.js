"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[766],{670:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(722);const a={NODE_ENV:"production",PUBLIC_URL:"/GrahaGrand",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8000/api",s=o.A.create({baseURL:a,headers:{"Content-Type":"application/json"},timeout:1e4});s.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),s.interceptors.response.use((e=>e),(e=>{var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));const p={auth:{login:e=>s.post("/auth/login/",e),register:e=>s.post("/auth/register/",e),refreshToken:e=>s.post("/auth/refresh/",{refresh:e}),logout:()=>s.post("/auth/logout/"),getMe:()=>s.get("/auth/me/")},properties:{getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.get("/properties/",{params:e})},getById:e=>s.get("/properties/".concat(e,"/")),create:e=>s.post("/properties/",e),update:(e,t)=>s.patch("/properties/".concat(e,"/"),t),delete:e=>s.delete("/properties/".concat(e,"/")),uploadImages:(e,t)=>{const r=new FormData;return Array.from(t).forEach((e=>{r.append("images",e)})),s.post("/properties/".concat(e,"/images/"),r,{headers:{"Content-Type":"multipart/form-data"}})},deleteImage:(e,t)=>s.delete("/properties/".concat(e,"/images/").concat(t,"/"))},upcomingProperties:{getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.get("/upcoming-properties/",{params:e})},getById:e=>s.get("/upcoming-properties/".concat(e,"/")),create:e=>s.post("/upcoming-properties/",e),update:(e,t)=>s.patch("/upcoming-properties/".concat(e,"/"),t),delete:e=>s.delete("/upcoming-properties/".concat(e,"/")),uploadImages:(e,t)=>{const r=new FormData;return Array.from(t).forEach((e=>{r.append("images",e)})),s.post("/upcoming-properties/".concat(e,"/images/"),r,{headers:{"Content-Type":"multipart/form-data"}})},deleteImage:(e,t)=>s.delete("/upcoming-properties/".concat(e,"/images/").concat(t,"/"))},futureDevelopments:{getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.get("/future-developments/",{params:e})},getById:e=>s.get("/future-developments/".concat(e,"/")),create:e=>s.post("/future-developments/",e),update:(e,t)=>s.patch("/future-developments/".concat(e,"/"),t),delete:e=>s.delete("/future-developments/".concat(e,"/")),uploadImages:(e,t)=>{const r=new FormData;return Array.from(t).forEach((e=>{r.append("images",e)})),s.post("/future-developments/".concat(e,"/images/"),r,{headers:{"Content-Type":"multipart/form-data"}})},deleteImage:(e,t)=>s.delete("/future-developments/".concat(e,"/images/").concat(t,"/"))},users:{getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.get("/users/",{params:e})},getById:e=>s.get("/users/".concat(e,"/")),update:(e,t)=>s.patch("/users/".concat(e,"/"),t),delete:e=>s.delete("/users/".concat(e,"/"))}};p.getProperties=p.properties.getAll,p.getProperty=p.properties.getById,p.createProperty=p.properties.create,p.updateProperty=p.properties.update,p.deleteProperty=p.properties.delete,p.uploadPropertyImages=p.properties.uploadImages,p.deletePropertyImage=p.properties.deleteImage;const n=p},766:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var o=r(43),a=r(366),s=r(670),p=r(579);const n=()=>{const[e,t]=(0,o.useState)([]),[r,n]=(0,o.useState)(!0),[c,i]=(0,o.useState)(null);(0,o.useEffect)((()=>{(async()=>{try{var e,r;const o=await s.A.getUpcomingProperties(),a=Array.isArray(o.data)?o.data:(null===(e=o.data)||void 0===e?void 0:e.results)||(null===(r=o.data)||void 0===r?void 0:r.data)||[];t(a),n(!1)}catch(o){i(o.message||"Failed to load properties"),n(!1)}})()}),[]);return r?(0,p.jsx)("div",{className:"p-4",children:"Loading..."}):c?(0,p.jsxs)("div",{className:"p-4 text-red-600",children:["Error: ",c]}):e.length?(0,p.jsxs)("div",{className:"upcoming-properties-container",children:[(0,p.jsxs)("div",{className:"upcoming-properties-header",children:[(0,p.jsx)("h2",{className:"upcoming-properties-title",children:"Upcoming Properties"}),(0,p.jsx)(a.N_,{to:"/admin/upcoming-properties/add",className:"bg-yellow-500 text-gray-900 px-4 py-2 rounded hover:bg-yellow-600",children:"Add New Upcoming Property"})]}),(0,p.jsx)("div",{className:"upcoming-properties-table",children:(0,p.jsxs)("table",{className:"min-w-full bg-white shadow rounded-lg",children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{className:"bg-gray-800 text-white",children:[(0,p.jsx)("th",{className:"py-3 px-4 text-left",children:"Location"}),(0,p.jsx)("th",{className:"py-3 px-4 text-left",children:"Area (sq ft)"}),(0,p.jsx)("th",{className:"py-3 px-4 text-left",children:"Completion Date"}),(0,p.jsx)("th",{className:"py-3 px-4 text-left",children:"Actions"})]})}),(0,p.jsx)("tbody",{children:e.map((r=>(0,p.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,p.jsx)("td",{className:"py-3 px-4",children:r.location}),(0,p.jsx)("td",{className:"py-3 px-4",children:r.area}),(0,p.jsx)("td",{className:"py-3 px-4",children:r.expected_completion?new Date(r.expected_completion).toLocaleDateString():"N/A"}),(0,p.jsxs)("td",{className:"py-3 px-4 space-x-2",children:[(0,p.jsx)(a.N_,{to:"/admin/upcoming-properties/edit/".concat(r.id),className:"text-yellow-600 hover:underline",children:"Edit"}),(0,p.jsx)("button",{onClick:()=>(async r=>{if(window.confirm("Are you sure you want to delete this upcoming property?"))try{await s.A.deleteUpcomingProperty(r),t(e.filter((e=>e.id!==r)))}catch(o){i(o.message||"Failed to delete property")}})(r.id),className:"text-red-600 hover:underline",children:"Delete"})]})]},r.id)))})]})})]}):(0,p.jsx)("div",{className:"p-4",children:"No upcoming properties found"})}}}]);
//# sourceMappingURL=766.653918c8.chunk.js.map